## Introduction

A Python-based Connector Application that connects to and subscribes to the Kafka Topic on Event Streams based on IBM Cloud, formats the consumed messages and sends to SevOne NPM via SevOne REST API.
![Python Connector Workflow](/images/1.png "Python Connector Workflow")

## Prerequisites

- [Python](https://www.python.org/downloads/) 3.6 or later
- An [IBM Cloud Account](https://cloud.ibm.com/) 
- Event Steams and Kafka Topic has been set up on IBM Cloud account 
- A SevOne NPM account which can access to certain SevOne NPM instance

## Included components

- [Swagger Codegen](https://swagger.io/docs/open-source-tools/swagger-codegen/)：Swagger Codegen can produce server and client SDKs for any OpenAPI-defined API to facilitate the build process. This repository uses the API SDKs generated by Swagger Codegen to interact with SevOne NPM instance.
- [IBM Event Streams](https://www.ibm.com/cloud/event-streams): A scalable, high-throughput message bus. Connect microservices together using open protocols. The Kafka service connected by this connector application is hosted on IBM Event Sreams.
- [Apache Kafka](https://kafka.apache.org/) : Apache Kafka is an open source distributed event streaming platform for high-performance data pipelines, flow analysis, data integration, and mission-critical applications.
- [SevOne NPM](https://www.sevone.com/products/): IBM SevOne Network Performance Management (NPM) provides comprehensive and scalable Network and infrastructure Management platform to enable the transition to virtualized Network and cloud services.


## Installation & Usage

#### Installed the required packages
Clone the repository and install the package from source.

```
pip install -r requirements.txt
pip install .
```
#### Setup connections credentials
Copy the `env.sample` file to `.env` and change the values in the `.env` file with IBM Event Streams credentials and SevOne credentials.
IBM Event Streams Service credentials can be generated by clicked `Service credentials` > `New Credentials`  when you access to your created Event Streams resource.

![connections credentials](/images/2.png "connections credentials")

#### Run the application 
After completing the preceding steps, execute the following command:
Run the producer to send the preset message to the specified Kafka topic
`python3 app.py -producer`
Run the consumer, consume the message in the Kafka Topic, convert it to the appropriate format and send it to the SevOne NPM by invoking the SevOne REST API
`python3 app.py -consumer`
The application will keep running until it is interrupted by `Ctrl+C`.

New items are then created on SevOne NPM, which can be seen via the SevOne NPM GUI.

![SevOne NPM GUI](/images/3.png "SevOne NPM GUI")